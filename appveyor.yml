build: off


install:
  - ps: Install-Product node 8
  - git submodule update --init --recursive
  - yarn install
  - yarn install-plugins
  - yarn ci:compile

test_script:
  - yarn screentest
  - 7z a screentest.zip test-dist\screentest\*
  - ps: $env:changed_screens = (Get-Content -Raw -Path test-dist\screentest\state.json | ConvertFrom-Json).changedScreens
  - ps: If ($env:changed_screens -gt 0) {Add-AppveyorMessage "&#58;warning&#58; $env:changed_screens screens have been changed"} else { Add-AppveyorMessage "&#58;white_check_mark&#58; no screens changed" }

artifacts:
  - path: 'screentest.zip'
    name: Screentests

notifications:
  - provider: GitHubPullRequest
    template: "Build messages: {{#jobs}} {{#messages}} {{message}} {{/messages}} {{/jobs}}"
